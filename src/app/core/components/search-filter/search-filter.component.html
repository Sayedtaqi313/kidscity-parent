<div class="absolute -bottom-4 left-0 z-[999] right-0 pb-6 md:pb-8 px-4">
  <div class="max-w-3xl mx-auto">
    <form
      [formGroup]="searchForm"
      (ngSubmit)="onSearch()"
      class="bg-white/95 backdrop-blur-lg rounded-xl shadow-xl border border-white/20 transition-all duration-200"
    >
      <div class="grid grid-cols-1 md:grid-cols-12 gap-3 p-4">
        <div class="md:col-span-4 relative">
          <label class="block text-xs font-medium text-gray-600 mb-1 ml-1"
            >Location</label
          >
          <div class="relative">
            <input
              (focus)="locationFocused = true"
              (blur)="onLocationBlur()"
              id="searchLocation"
              type="text"
              [formControl]="locationControl"
              (input)="onLocationInput($event)"
              class="block w-full rounded-lg border border-gray-300 focus:border-green-500 focus:outline-none py-2 px-3 pl-9 text-sm placeholder-gray-400"
              placeholder="Search location..."
            />
            <svg
              class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
              />
            </svg>

            <div
              *ngIf="locationFocused && suggestions.length"
              class="absolute z-[9999] w-full mb-1 bg-white rounded-lg shadow-xl border border-gray-200 max-h-60 overflow-y-auto"
              style="bottom: 100%"
            >
              <div
                *ngFor="let suggestion of suggestions"
                (click)="onLocationSelect(suggestion)"
                class="px-4 py-2.5 text-sm hover:bg-gray-50 cursor-pointer transition-colors border-b border-gray-100 last:border-0"
              >
                {{ suggestion.formatted }}
              </div>
            </div>
          </div>
        </div>

        <!-- Age Range Inputs -->
        <div class="md:col-span-4">
          <label class="block text-xs font-medium text-gray-600 mb-1 ml-1"
            >Age Range</label
          >
          <div class="grid grid-cols-2 gap-2">
            <div class="relative">
              <input
                type="number"
                formControlName="minAge"
                placeholder="Min"
                min="1"
                class="w-full pl-10 pr-2 py-2.5 text-sm rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none transition-colors duration-200 bg-white/95"
              />
              <span
                class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 text-xs mr-2"
                >From</span
              >
            </div>
            <div class="relative">
              <input
                type="number"
                formControlName="maxAge"
                placeholder="Max"
                min="1"
                max="14"
                class="w-full pl-8 pr-2 py-2.5 text-sm rounded-lg border border-gray-200 focus:border-green-500 focus:outline-none transition-colors duration-200 bg-white/95"
              />
              <span
                class="absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400 text-xs"
                >To</span
              >
            </div>
          </div>
        </div>

        <!-- Activity Type Buttons -->
        <div class="md:col-span-2">
          <label class="block text-xs font-medium text-gray-600 mb-1 ml-1"
            >Activity Type</label
          >
          <div class="grid grid-cols-2 gap-2">
            <button
              type="button"
              *ngFor="let type of activityTypes"
              (click)="toggleActivityType(type.value)"
              [class]="
                selectedActivity === type.value
                  ? 'bg-green-500 text-white border-green-600'
                  : 'bg-white/95 text-gray-600 border-gray-200 hover:border-green-400'
              "
              class="flex items-center justify-center py-2 rounded-lg border transition-all duration-200 text-xs font-medium"
            >
              {{ type.label }}
            </button>
          </div>
        </div>

        <!-- Search Button -->
        <div
          class="md:col-span-1 md:col-start-12 flex justify-end items-center"
        >
          <button
            type="submit"
            class="h-full bg-green-500 hover:bg-green-600 text-white py-2 px-2 rounded-lg transition-all duration-200 flex items-center justify-center"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              />
            </svg>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
